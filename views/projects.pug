extends layouts/layout.pug

block content
  div(class='row row-cols-1 row-cols-md-2 row-cols-lg-3')
    each project in model.projects.sort((a, b) => { if(!a.githubRepo) return 1; if(!b.githubRepo) return -1; let dateA = a.githubRepo.getDetails().created_at; let dateB = b.githubRepo.getDetails().created_at; if(dateA == dateB) { return 0; } else if(dateA < dateB) { return 1; } else { return -1; }})
      div(class='col mb-4')
        div(class='card')
          if project.screenshots.length > 0
            - let carouselID = `carousel${project.title.replace(' ', '-')}`
            div(style='height: 300px')
              div(id=carouselID, class='carousel slide', data-ride='carousel')
                ol(class='carousel-indicators')
                  each screenshot, index in project.screenshots
                    li(data-target=`#${carouselID}`, data-slide-to=`${index}`, class=`${index == 0 ? 'active' : ''}`)
                div(class='carousel-inner')
                  each screenshot, index in project.screenshots
                    div(class=`carousel-item${index == 0 ? ' active' : ''}`)
                      img(src=`./images/${screenshot}`, class='d-block w-100', alt='...')
                a(class='carousel-control-prev', href=`#${carouselID}`, role='button', data-slide='prev')
                  span(class='carousel-control-prev-icon', aria-hidden='true')
                  span(class='sr-only') Previous
                a(class='carousel-control-next', href=`#${carouselID}`, role='button', data-slide='next')
                  span(class='carousel-control-next-icon', aria-hidden='true')
                  span(class='sr-only') Next
            // Add screenshots here
          div(class='card-body')
            h5(class='card-title') #{project.title}
            if project.githubRepo
              h6(class='card-subtitle mb-2 text-muted') #{'Updated on: ' + project.githubRepo.getDetails().updated_at.substr(0, 10)}
            p
              each language in project.languages
                span(class='badge badge-pill badge-primary') #{language}
              br
              each framework in project.frameworks
                span(class='badge badge-pill badge-secondary') #{framework}
            if project.about
              p(class='card-text') !{project.about.toHTML()}
            if project.websiteURL
              p
                a(href=project.websiteURL, class='btn btn-success', target='_blank') Use online
            if project.githubRepo
              a(href=project.githubRepo.getURL(), class='btn btn-primary', target='_blank') View on GitHub